syntax = "proto3";

package projectsuit.hotel.v1;

import "google/protobuf/timestamp.proto";
import "google/protobuf/struct.proto";
import "projectsuit/common/v1/common.v1.proto";
import "projectsuit/inventory/v1/inventory.v1.proto"; // Warehouse
import "projectsuit/customer/v1/customer.v1.proto"; // Customer
// import "projectsuit.sales_channel.v1/sales_channel.v1.proto"; // SalesChannel (ayrı dosyada ise)

option go_package = "github.com/enessefak/suit-proto/gen/go/projectsuit/hotel/v1;hotelv1";
option java_package = "com.projectsuit.hotel.v1";
option java_multiple_files = true;
option java_outer_classname = "HotelProto";

service HotelService {
  // HotelServiceZone Komutları
  rpc CreateHotelServiceZone(CreateHotelServiceZoneRequest) returns (projectsuit.common.v1.IdResponse);
  rpc UpdateHotelServiceZone(UpdateHotelServiceZoneRequest) returns (projectsuit.common.v1.MutateResponse);
  rpc DeleteHotelServiceZone(projectsuit.common.v1.DeleteByIdRequest) returns (projectsuit.common.v1.MutateResponse);

  // RoomType Komutları
  rpc CreateRoomType(CreateRoomTypeRequest) returns (projectsuit.common.v1.IdResponse);
  rpc UpdateRoomType(UpdateRoomTypeRequest) returns (projectsuit.common.v1.MutateResponse);
  rpc DeleteRoomType(projectsuit.common.v1.DeleteByIdRequest) returns (projectsuit.common.v1.MutateResponse);

  // Room Komutları
  rpc CreateRoom(CreateRoomRequest) returns (projectsuit.common.v1.IdResponse);
  rpc UpdateRoom(UpdateRoomRequest) returns (projectsuit.common.v1.MutateResponse);
  rpc UpdateRoomStatus(UpdateRoomStatusRequest) returns (projectsuit.common.v1.MutateResponse);
  rpc DeleteRoom(projectsuit.common.v1.DeleteByIdRequest) returns (projectsuit.common.v1.MutateResponse);

  // Reservation Komutları
  rpc CreateReservation(CreateReservationRequest) returns (projectsuit.common.v1.IdResponse);
  rpc UpdateReservation(UpdateReservationRequest) returns (projectsuit.common.v1.MutateResponse);
  rpc CancelReservation(CancelReservationRequest) returns (projectsuit.common.v1.MutateResponse);
  rpc CheckInGuest(CheckInGuestRequest) returns (projectsuit.common.v1.MutateResponse);
  rpc CheckOutGuest(CheckOutGuestRequest) returns (projectsuit.common.v1.MutateResponse);

  // HotelServiceZone Sorguları
  rpc GetHotelServiceZone(projectsuit.common.v1.GetByIdRequest) returns (GetHotelServiceZoneResponse);
  rpc ListHotelServiceZones(ListHotelServiceZonesRequest) returns (ListHotelServiceZonesResponse);

  // RoomType Sorguları
  rpc GetRoomType(projectsuit.common.v1.GetByIdRequest) returns (GetRoomTypeResponse);
  rpc ListRoomTypes(ListRoomTypesRequest) returns (ListRoomTypesResponse);

  // Room Sorguları
  rpc GetRoom(projectsuit.common.v1.GetByIdRequest) returns (GetRoomResponse);
  rpc ListRooms(ListRoomsRequest) returns (ListRoomsResponse);

  // Reservation Sorguları
  rpc GetReservation(projectsuit.common.v1.GetByIdRequest) returns (GetReservationResponse);
  rpc ListReservations(ListReservationsRequest) returns (ListReservationsResponse);
}

// --- Entity Mesajları ---
message HotelServiceZone {
  string id = 1;
  string warehouse_id = 2;
  string code = 3;
  bool is_order_point = 4;
  optional string default_kitchen_id = 5;
  bool is_active = 6;
  google.protobuf.Timestamp created_at = 7;
  google.protobuf.Timestamp updated_at = 8;

  string name = 20;
  string description = 21;
  repeated projectsuit.common.v1.TranslationOutput all_translations = 22;
  optional projectsuit.inventory.v1.Warehouse warehouse_summary = 23;
}

message RoomType {
  string id = 1;
  string warehouse_id = 2;
  string code = 3;
  int32 capacity_adults = 4;
  int32 capacity_children = 5;
  projectsuit.common.v1.Money base_price = 6;
  google.protobuf.Struct amenities = 7;
  repeated string image_urls = 8;
  int32 sort_order = 9;
  bool is_active = 10;
  google.protobuf.Timestamp created_at = 11;
  google.protobuf.Timestamp updated_at = 12;

  string name = 20;
  string description = 21;
  string policy_details = 22;
  repeated projectsuit.common.v1.TranslationOutput all_translations = 23;
  optional projectsuit.inventory.v1.Warehouse warehouse_summary = 24;
}

message Room {
  string id = 1;
  string warehouse_id = 2;
  string room_type_id = 3;
  string room_number = 4;
  optional string floor_number = 5;
  string status = 6;
  optional string hk_status = 7;
  google.protobuf.Struct features = 8;
  bool is_active = 9;
  optional string notes = 10;
  google.protobuf.Timestamp created_at = 11;
  google.protobuf.Timestamp updated_at = 12;

  optional RoomType room_type_details = 20;
  optional projectsuit.inventory.v1.Warehouse warehouse_summary = 21;
}

message Reservation {
  string id = 1;
  string warehouse_id = 2;
  optional string reservation_number = 3;
  optional string customer_id = 4;
  optional string room_id = 5;
  string room_type_id = 6;
  string check_in_date = 7; // "YYYY-MM-DD"
  string check_out_date = 8; // "YYYY-MM-DD"
  int32 num_adults = 9;
  int32 num_children = 10;
  string reservation_type = 11;
  optional string reservable_item_id = 12;
  optional google.protobuf.Timestamp start_time = 13;
  optional google.protobuf.Timestamp end_time = 14;
  string status = 15;
  projectsuit.common.v1.Money total_amount = 16;
  projectsuit.common.v1.Money amount_paid = 17;
  optional string notes = 18;
  optional string booked_by_user_id = 19;
  optional string booked_via_sales_channel_id = 20;
  google.protobuf.Timestamp created_at = 21;
  google.protobuf.Timestamp updated_at = 22;

  optional projectsuit.inventory.v1.Warehouse warehouse_summary = 30;
  optional projectsuit.customer.v1.Customer customer_details = 31;
  optional Room room_details = 32;
  optional RoomType room_type_details_requested = 33;
  // optional projectsuit.sales_channel.v1.SalesChannel sales_channel_details = 34;
}

// --- Komut Mesajları ---
message CreateHotelServiceZoneRequest {
  string warehouse_id = 1;
  string code = 2;
  optional bool is_order_point = 3;
  optional string default_kitchen_id = 4;
  optional bool is_active = 5;
  repeated projectsuit.common.v1.TranslationInput translations = 6;
}
message UpdateHotelServiceZoneRequest {
  string id = 1;
  optional string code = 2;
  optional bool is_order_point = 3;
  optional string default_kitchen_id = 4;
  optional bool is_active = 5;
  repeated projectsuit.common.v1.TranslationInput translations_to_update = 6;
}

message CreateRoomTypeRequest {
  string warehouse_id = 1;
  string code = 2;
  int32 capacity_adults = 3;
  optional int32 capacity_children = 4;
  projectsuit.common.v1.Money base_price = 5;
  optional google.protobuf.Struct amenities = 6;
  repeated string image_urls = 7;
  optional int32 sort_order = 8;
  optional bool is_active = 9;
  repeated projectsuit.common.v1.TranslationInput translations = 10;
}
message UpdateRoomTypeRequest {
  string id = 1;
  optional string code = 2;
  optional int32 capacity_adults = 3;
  optional int32 capacity_children = 4;
  optional projectsuit.common.v1.Money base_price = 5;
  optional google.protobuf.Struct amenities = 6;
  repeated string image_urls = 7; // Liste tamamen güncellenir
  optional int32 sort_order = 8;
  optional bool is_active = 9;
  repeated projectsuit.common.v1.TranslationInput translations_to_update = 10;
}

message CreateRoomRequest {
  string warehouse_id = 1;
  string room_type_id = 2;
  string room_number = 3;
  optional string floor_number = 4;
  optional string status = 5;
  optional string hk_status = 6;
  optional google.protobuf.Struct features = 7;
  optional bool is_active = 8;
  optional string notes = 9;
}
message UpdateRoomRequest {
  string id = 1;
  optional string room_number = 2;
  optional string floor_number = 3;
  optional string status = 4;
  optional string hk_status = 5;
  optional google.protobuf.Struct features = 6;
  optional bool is_active = 7;
  optional string notes = 8;
}
message UpdateRoomStatusRequest {
  string room_id = 1;
  string new_status = 2;
  optional string new_hk_status = 3;
  optional string reason = 4;
}

message CreateReservationRequest {
  string warehouse_id = 1;
  optional string customer_id = 2;
  string room_type_id = 3;
  string check_in_date = 4;
  string check_out_date = 5;
  int32 num_adults = 6;
  optional int32 num_children = 7;
  string reservation_type = 8;
  optional string reservable_item_id = 9;
  optional google.protobuf.Timestamp start_time = 10;
  optional google.protobuf.Timestamp end_time = 11;
  optional string initial_status = 12;
  optional projectsuit.common.v1.Money total_amount = 13;
  optional string currency_code = 14;
  optional string notes = 15;
  optional string booked_by_user_id = 16;
  optional string booked_via_sales_channel_id = 17;
}
message UpdateReservationRequest {
  string id = 1;
  optional string customer_id = 2;
  optional string room_id = 3; // Oda değişikliği/atama
  optional string room_type_id = 4;
  optional string check_in_date = 5;
  optional string check_out_date = 6;
  optional int32 num_adults = 7;
  optional int32 num_children = 8;
  optional string status = 9;
  optional projectsuit.common.v1.Money total_amount = 10;
  optional string notes = 11;
}
message CancelReservationRequest {
  string id = 1;
  optional string reason = 2;
  optional string cancelled_by_user_id = 3;
}
message CheckInGuestRequest {
  string reservation_id = 1;
  string room_id = 2;
  optional string checked_in_by_user_id = 3;
}
message CheckOutGuestRequest {
  string reservation_id = 1;
  optional string checked_out_by_user_id = 2;
}

// --- Sorgu Mesajları ---
message GetHotelServiceZoneResponse { HotelServiceZone zone = 1; }
message ListHotelServiceZonesRequest {
  projectsuit.common.v1.ListRequest base_request = 1;
  string filter_by_warehouse_id = 2;
}
message ListHotelServiceZonesResponse {
  repeated HotelServiceZone zones = 1;
  projectsuit.common.v1.PaginationResponse pagination = 2;
}

message GetRoomTypeResponse { RoomType room_type = 1; }
message ListRoomTypesRequest {
  projectsuit.common.v1.ListRequest base_request = 1;
  string filter_by_warehouse_id = 2;
}
message ListRoomTypesResponse {
  repeated RoomType room_types = 1;
  projectsuit.common.v1.PaginationResponse pagination = 2;
}

message GetRoomResponse { Room room = 1; }
message ListRoomsRequest {
  projectsuit.common.v1.ListRequest base_request = 1;
  string filter_by_warehouse_id = 2;
  optional string filter_by_room_type_id = 3;
  optional string filter_by_status = 4;
  optional string filter_by_hk_status = 5;
}
message ListRoomsResponse {
  repeated Room rooms = 1;
  projectsuit.common.v1.PaginationResponse pagination = 2;
}

message GetReservationResponse { Reservation reservation = 1; }
message ListReservationsRequest {
  projectsuit.common.v1.ListRequest base_request = 1;
  string filter_by_warehouse_id = 2;
  optional string filter_by_customer_id = 3;
  optional string filter_by_room_id = 4;
  optional string filter_by_room_type_id = 5;
  optional projectsuit.common.v1.DateRange filter_by_check_in_date_range = 6;
  optional projectsuit.common.v1.DateRange filter_by_check_out_date_range = 7;
  optional string filter_by_status = 8;
}
message ListReservationsResponse {
  repeated Reservation reservations = 1;
  projectsuit.common.v1.PaginationResponse pagination = 2;
}
